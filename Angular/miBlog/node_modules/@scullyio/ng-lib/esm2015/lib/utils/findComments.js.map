{"version":3,"file":"findComments.js","sourceRoot":"/home/runner/work/scully/scully/libs/ng-lib/src/","sources":["lib/utils/findComments.ts"],"names":[],"mappings":";;;;;;;;;;;;AAMA,MAAM,UAAU,YAAY,CAAC,QAAqB,EAAE,UAAmB;;UAC/D,QAAQ,GAAG,EAAE;;;UAEb,QAAQ,GAAG,QAAQ,CAAC,kBAAkB,CAC1C,QAAQ,EACR,UAAU,CAAC,YAAY,EACvB;QACE,UAAU;;;;QAAE,IAAI,CAAC,EAAE;YACjB,4DAA4D;YAC5D,oDAAoD;YACpD,mEAAmE;YACnE,IACE,UAAU;gBACV,IAAI,CAAC,SAAS;gBACd,CAAC,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,UAAU,CAAC,EACpC;gBACA,OAAO,UAAU,CAAC,aAAa,CAAC;aACjC;YACD,OAAO,UAAU,CAAC,aAAa,CAAC;QAClC,CAAC,CAAA;KACF;IACD,oDAAoD;KACrD;;QACG,OAAO;IACX,sDAAsD;IACtD,OAAO,CAAC,OAAO,GAAG,QAAQ,CAAC,QAAQ,EAAE,CAAC,EAAE;QACtC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;KACxB;IACD,OAAO,QAAQ,CAAC;AAClB,CAAC","sourcesContent":["/**\n * Returns an array of nodes coninting all the html comments in the element.\n * When a searchText is given this is narrowed down to only comments that contian this text\n * @param rootElem Element to search nto\n * @param searchText optional string that needs to be in a HTML comment\n */\nexport function findComments(rootElem: HTMLElement, searchText?: string) {\n  const comments = [];\n  // Fourth argument, which is actually obsolete according to the DOM4 standard, seems required in IE 11\n  const iterator = document.createNodeIterator(\n    rootElem,\n    NodeFilter.SHOW_COMMENT,\n    {\n      acceptNode: node => {\n        // Logic to determine whether to accept, reject or skip node\n        // In this case, only accept nodes that have content\n        // that is containing our searchText, by rejecting any other nodes.\n        if (\n          searchText &&\n          node.nodeValue &&\n          !node.nodeValue.includes(searchText)\n        ) {\n          return NodeFilter.FILTER_REJECT;\n        }\n        return NodeFilter.FILTER_ACCEPT;\n      }\n    }\n    // , false // IE-11 support requires this parameter.\n  );\n  let curNode;\n  // tslint:disable-next-line: no-conditional-assignment\n  while ((curNode = iterator.nextNode())) {\n    comments.push(curNode);\n  }\n  return comments;\n}\n"]}