"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.readAngularJson = void 0;
const fs_extra_1 = require("fs-extra");
const jsonc_1 = require("jsonc");
const path_1 = require("path");
const findAngularJsonPath_1 = require("./findAngularJsonPath");
const configFiles = ['angular.json', 'workspace.json'];
function readAngularJson() {
    let angularConfig;
    if (angularConfig) {
        return angularConfig;
    }
    try {
        const basePath = findAngularJsonPath_1.findAngularJsonPath();
        const fileName = configFiles.find(f => fs_extra_1.existsSync(path_1.join(basePath, f)));
        const path = path_1.join(findAngularJsonPath_1.findAngularJsonPath(), fileName);
        angularConfig = jsonc_1.jsonc.parse(fs_extra_1.readFileSync(path).toString());
    }
    catch (e) {
        angularConfig = {
            path: '',
            defaultProject: 'default',
            defaultProjectName: 'default',
        };
        // logError(`Angular config file could not be parsed!`, e);
        // process.exit(15);
    }
    return angularConfig;
}
exports.readAngularJson = readAngularJson;
//# sourceMappingURL=read-angular-json.js.map