"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.findAngularJsonPath = void 0;
const fs_1 = require("fs");
const path_1 = require("path");
const cli_options_1 = require("./cli-options");
const pjf = !!cli_options_1.pjFirst;
let startPath;
function findAngularJsonPath(path, usePackageJson = pjf) {
    if (!path) {
        path = process.cwd();
    }
    if (!startPath) {
        startPath = path;
    }
    const file = path_1.resolve(path, usePackageJson ? 'package.json' : 'angular.json');
    if (fs_1.existsSync(file) && fs_1.statSync(file).isFile()) {
        return path;
    }
    const parent = path_1.resolve(path, '..');
    if (parent === path) {
        if (!pjf && !usePackageJson) {
            return findAngularJsonPath(startPath, true);
        }
        if (pjf) {
            return findAngularJsonPath(startPath, false);
        }
        return null;
    }
    return findAngularJsonPath(parent, usePackageJson);
}
exports.findAngularJsonPath = findAngularJsonPath;
//# sourceMappingURL=findAngularJsonPath.js.map